# auto-samba4-AD
script for deploying functional Active Directory with kerberos on Debian system
(coming soon - eta march 2018)

***Motivation***
  1. I was playing with the deployment of samba4 AD at home with various degrees of success. Since I wanted to document the procedures and steps taken for possible future updates, I always tried to repeat the process on a clean system - which involved making several changes to the system before the actual installation of samba AD -> thus I decided to automate the whole thing.

***Installation***
  1. You need a fresh install of Debian server system (tested and verified on stretch). Do not install anything besides common utilities, when prompted during installation of the Debian system.
  2. Copy script to location of your liking
  3. Login as root, run as root.
  
  This script will reboot your system few times!
  ALWAYS after the reboot, login back as root and run the script from the same location.
  Script creates a "log" file, where it stores crucial information for the next stage run - DO NOT EDIT this file.
  And please, remove that file after AD has been deployed.
  
***What this script does***
  1. Fixes some small common debian items (like locales, keeping CD source, etc.)
  2. Creates a user you specify
  3. Installs and configures some common and required programs (like openSSH server)
  4. Installs samba4 and deploys AD according to your specifications
  
  Script can also be run to join already existing AD (e.g. if you want to add another AD server). Prerequisites are the same, you just specify a commandline option to join. This also sets up a synchronization between the two machines.
  
***What this script does not***
  1. This script does not provide configuration of the deployed AD. For that you must either use RSAT tools on Windows or samba tool for AD configuration.
  2. IMPORTANT(!) -> apparently the password policies configuration via RSAT does not work well with samba. To configure password policies, always use samba AD tool.
